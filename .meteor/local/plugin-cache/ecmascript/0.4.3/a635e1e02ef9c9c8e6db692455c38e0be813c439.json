{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/packages/kadira:dochead/lib/both.js","filenameRelative":"/packages/kadira:dochead/lib/both.js","env":{},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":false,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/packages/kadira:dochead/lib/both.js.map","sourceFileName":"/packages/kadira:dochead/lib/both.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"basename":"both"},"ignored":false,"code":"var FlowRouter = null;\nif (Package['kadira:flow-router-ssr']) {\n  FlowRouter = Package['kadira:flow-router-ssr'].FlowRouter;\n}\n\nif (Meteor.isClient) {\n  var titleDependency = new Tracker.Dependency();\n}\n\nDocHead = {\n  currentTitle: null,\n  setTitle: function () {\n    function setTitle(title) {\n      if (Meteor.isClient) {\n        titleDependency.changed();\n        document.title = title;\n      } else {\n        this.currentTitle = title;\n        var titleHtml = '<title>' + title + '</title>';\n        this._addToHead(titleHtml);\n      }\n    }\n\n    return setTitle;\n  }(),\n  addMeta: function () {\n    function addMeta(info) {\n      this._addTag(info, 'meta');\n    }\n\n    return addMeta;\n  }(),\n  addLink: function () {\n    function addLink(info) {\n      this._addTag(info, 'link');\n    }\n\n    return addLink;\n  }(),\n  getTitle: function () {\n    function getTitle() {\n      if (Meteor.isClient) {\n        titleDependency.depend();\n        return document.title;\n      }\n      return this.currentTitle;\n    }\n\n    return getTitle;\n  }(),\n  addLdJsonScript: function () {\n    function addLdJsonScript(jsonObj) {\n      var strObj = JSON.stringify(jsonObj);\n      this._addLdJsonScript(strObj);\n    }\n\n    return addLdJsonScript;\n  }(),\n  loadScript: function () {\n    function loadScript(url, options, callback) {\n      if (Meteor.isClient) {\n        npmLoadScript(url, options, callback);\n      }\n    }\n\n    return loadScript;\n  }(),\n  _addTag: function () {\n    function _addTag(info, tag) {\n      var meta = this._buildTag(info, tag);\n      if (Meteor.isClient) {\n        document.getElementsByTagName('head')[0].insertAdjacentHTML('beforeend', meta);\n      } else {\n        this._addToHead(meta);\n      }\n    }\n\n    return _addTag;\n  }(),\n  _addToHead: function () {\n    function _addToHead(html) {\n      // only work there is kadira:flow-router-ssr\n      if (!FlowRouter) {\n        return;\n      }\n      var ssrContext = FlowRouter.ssrContext.get();\n      if (ssrContext) {\n        ssrContext.addToHead(html);\n      }\n    }\n\n    return _addToHead;\n  }(),\n  _buildTag: function () {\n    function _buildTag(metaInfo, type) {\n      var props = \"\";\n      for (var key in meteorBabelHelpers.sanitizeForInObject(metaInfo)) {\n        props += key + '=\"' + metaInfo[key] + '\" ';\n      }\n      props += 'dochead=\"1\"';\n      var meta = '<' + type + ' ' + props + '/>';\n      return meta;\n    }\n\n    return _buildTag;\n  }(),\n  _addLdJsonScript: function () {\n    function _addLdJsonScript(stringifiedObject) {\n      var scriptTag = '<script type=\"application/ld+json\" dochead=\"1\">' + stringifiedObject + '</script>';\n      if (Meteor.isClient) {\n        document.getElementsByTagName('head')[0].insertAdjacentHTML('beforeend', scriptTag);\n      } else {\n        this._addToHead(scriptTag);\n      }\n    }\n\n    return _addLdJsonScript;\n  }(),\n  removeDocHeadAddedTags: function () {\n    function removeDocHeadAddedTags() {\n      if (Meteor.isClient) {\n        var elements = document.querySelectorAll('[dochead=\"1\"]');\n        // We use for-of here to loop only over iterable objects\n        for (var _iterator = elements, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n          var _ref;\n\n          if (_isArray) {\n            if (_i >= _iterator.length) break;\n            _ref = _iterator[_i++];\n          } else {\n            _i = _iterator.next();\n            if (_i.done) break;\n            _ref = _i.value;\n          }\n\n          var element = _ref;\n\n          element.parentNode.removeChild(element);\n        }\n      }\n    }\n\n    return removeDocHeadAddedTags;\n  }()\n};","ast":null,"map":{"version":3,"sources":["/packages/kadira:dochead/lib/both.js"],"names":[],"mappings":"AAAA,IAAI,aAAa,IAAb;AACJ,IAAI,QAAQ,wBAAR,CAAJ,EAAuC;AACrC,eAAa,QAAQ,wBAAR,EAAkC,UAAlC,CADwB;CAAvC;;AAIA,IAAI,OAAO,QAAP,EAAiB;AACnB,MAAI,kBAAkB,IAAI,QAAQ,UAAR,EAAtB,CADe;CAArB;;AAIA,UAAU;AACR,gBAAc,IAAd;AACA;sBAAS,OAAO;AACd,UAAI,OAAO,QAAP,EAAiB;AACnB,wBAAgB,OAAhB,GADmB;AAEnB,iBAAS,KAAT,GAAiB,KAAjB,CAFmB;OAArB,MAGO;AACL,aAAK,YAAL,GAAoB,KAApB,CADK;AAEL,YAAM,wBAAsB,kBAAtB,CAFD;AAGL,aAAK,UAAL,CAAgB,SAAhB,EAHK;OAHP;;;;KAHM;AAYR;qBAAQ,MAAM;AACZ,WAAK,OAAL,CAAa,IAAb,EAAmB,MAAnB,EADY;;;;KAZN;AAeR;qBAAQ,MAAM;AACZ,WAAK,OAAL,CAAa,IAAb,EAAmB,MAAnB,EADY;;;;KAfN;AAkBR;wBAAW;AACT,UAAI,OAAO,QAAP,EAAiB;AACnB,wBAAgB,MAAhB,GADmB;AAEnB,eAAO,SAAS,KAAT,CAFY;OAArB;AAIA,aAAO,KAAK,YAAL,CALE;;;;KAlBH;AAyBR;6BAAgB,SAAS;AACvB,UAAM,SAAS,KAAK,SAAL,CAAe,OAAf,CAAT,CADiB;AAEvB,WAAK,gBAAL,CAAsB,MAAtB,EAFuB;;;;KAzBjB;AA6BR;wBAAW,KAAK,SAAS,UAAU;AACjC,UAAI,OAAO,QAAP,EAAiB;AACnB,sBAAc,GAAd,EAAmB,OAAnB,EAA4B,QAA5B,EADmB;OAArB;;;;KA9BM;AAkCR;qBAAQ,MAAM,KAAK;AACjB,UAAM,OAAO,KAAK,SAAL,CAAe,IAAf,EAAqB,GAArB,CAAP,CADW;AAEjB,UAAI,OAAO,QAAP,EAAiB;AACnB,iBAAS,oBAAT,CAA8B,MAA9B,EAAsC,CAAtC,EAAyC,kBAAzC,CAA4D,WAA5D,EAAyE,IAAzE,EADmB;OAArB,MAEO;AACL,aAAK,UAAL,CAAgB,IAAhB,EADK;OAFP;;;;KApCM;AA0CR;wBAAW,MAAM;;AAEf,UAAI,CAAC,UAAD,EAAa;AACf,eADe;OAAjB;AAGA,UAAI,aAAa,WAAW,UAAX,CAAsB,GAAtB,EAAb,CALW;AAMf,UAAI,UAAJ,EAAgB;AACd,mBAAW,SAAX,CAAqB,IAArB,EADc;OAAhB;;;;KAhDM;AAoDR;uBAAU,UAAU,MAAM;AACxB,UAAI,QAAQ,EAAR,CADoB;AAExB,WAAK,IAAI,GAAJ,2CAAW,SAAhB,EAA0B;AACxB,iBAAY,aAAQ,SAAS,GAAT,QAApB,CADwB;OAA1B;AAGA,eAAS,aAAT,CALwB;AAMxB,UAAI,aAAW,aAAQ,YAAnB,CANoB;AAOxB,aAAO,IAAP,CAPwB;;;;KApDlB;AA6DR;8BAAiB,mBAAmB;AAClC,UAAM,gEAA8D,+BAA9D,CAD4B;AAElC,UAAI,OAAO,QAAP,EAAiB;AACnB,iBAAS,oBAAT,CAA8B,MAA9B,EAAsC,CAAtC,EAAyC,kBAAzC,CAA4D,WAA5D,EAAyE,SAAzE,EADmB;OAArB,MAEO;AACL,aAAK,UAAL,CAAgB,SAAhB,EADK;OAFP;;;;KA/DM;AAqER;sCAAyB;AACvB,UAAI,OAAO,QAAP,EAAiB;AACnB,YAAM,WAAW,SAAS,gBAAT,CAA0B,eAA1B,CAAX;;AADa,6BAGC,sHAApB,IAA8B;;;;;;;;;;;;cAArB,eAAqB;;AAC5B,kBAAQ,UAAR,CAAmB,WAAnB,CAA+B,OAA/B,EAD4B;SAA9B;OAHF;;;;KAtEM;CAAV","file":"/packages/kadira:dochead/lib/both.js.map","sourcesContent":["var FlowRouter = null;\nif (Package['kadira:flow-router-ssr']) {\n  FlowRouter = Package['kadira:flow-router-ssr'].FlowRouter;\n}\n\nif (Meteor.isClient) {\n  var titleDependency = new Tracker.Dependency();\n}\n\nDocHead = {\n  currentTitle: null,\n  setTitle(title) {\n    if (Meteor.isClient) {\n      titleDependency.changed();\n      document.title = title;\n    } else {\n      this.currentTitle = title;\n      const titleHtml = `<title>${title}</title>`;\n      this._addToHead(titleHtml);\n    }\n  },\n  addMeta(info) {\n    this._addTag(info, 'meta');\n  },\n  addLink(info) {\n    this._addTag(info, 'link');\n  },\n  getTitle() {\n    if (Meteor.isClient) {\n      titleDependency.depend();\n      return document.title;\n    }\n    return this.currentTitle;\n  },\n  addLdJsonScript(jsonObj) {\n    const strObj = JSON.stringify(jsonObj);\n    this._addLdJsonScript(strObj);\n  },\n  loadScript(url, options, callback) {\n    if (Meteor.isClient) {\n      npmLoadScript(url, options, callback);\n    }\n  },\n  _addTag(info, tag) {\n    const meta = this._buildTag(info, tag);\n    if (Meteor.isClient) {\n      document.getElementsByTagName('head')[0].insertAdjacentHTML('beforeend', meta);\n    } else {\n      this._addToHead(meta);\n    }\n  },\n  _addToHead(html) {\n    // only work there is kadira:flow-router-ssr\n    if (!FlowRouter) {\n      return;\n    }\n    let ssrContext = FlowRouter.ssrContext.get();\n    if (ssrContext) {\n      ssrContext.addToHead(html);\n    }\n  },\n  _buildTag(metaInfo, type) {\n    let props = \"\";\n    for (let key in metaInfo) {\n      props += `${key}=\"${metaInfo[key]}\" `;\n    }\n    props += 'dochead=\"1\"';\n    var meta = `<${type} ${props}/>`;\n    return meta;\n  },\n  _addLdJsonScript(stringifiedObject) {\n    const scriptTag = `<script type=\"application/ld+json\" dochead=\"1\">${stringifiedObject}</script>`;\n    if (Meteor.isClient) {\n      document.getElementsByTagName('head')[0].insertAdjacentHTML('beforeend', scriptTag);\n    } else {\n      this._addToHead(scriptTag);\n    }\n  },\n  removeDocHeadAddedTags() {\n    if (Meteor.isClient) {\n      const elements = document.querySelectorAll('[dochead=\"1\"]');\n      // We use for-of here to loop only over iterable objects\n      for (let element of elements) {\n        element.parentNode.removeChild(element);\n      }\n    }\n  }\n};\n"]},"hash":"a635e1e02ef9c9c8e6db692455c38e0be813c439"}
