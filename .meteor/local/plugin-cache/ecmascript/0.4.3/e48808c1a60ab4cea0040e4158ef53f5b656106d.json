{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/packages/kadira:dochead/test/server.js","filenameRelative":"/packages/kadira:dochead/test/server.js","env":{},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":false,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/packages/kadira:dochead/test/server.js.map","sourceFileName":"/packages/kadira:dochead/test/server.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"basename":"server"},"ignored":false,"code":"var onSsrContext = function onSsrContext(fn) {\n  SsrContext.addToHead = fn;\n  var stop = function stop() {\n    SsrContext.addToHead = null;\n  };\n  return {\n    stop: stop\n  };\n};\n\nTinytest.addAsync('Server - setTitle and getTitle', function (test, done) {\n  var id = Random.id();\n  var handle = onSsrContext(function (html) {\n    var title = '<title>' + id + '</title>';\n    test.equal(html, title);\n    test.equal(DocHead.getTitle(), id);\n    handle.stop();\n    done();\n  });\n  DocHead.setTitle(id);\n});\n\nTinytest.addAsync('Server - addMeta', function (test, done) {\n  var metaInfo = { name: \"description\", content: \"hello content\" };\n  var handle = onSsrContext(function (html) {\n    var metaTag = '<meta name=\"' + metaInfo.name + '\" content=\"' + metaInfo.content + '\" dochead=\"1\"/>';\n    test.equal(html, metaTag);\n    handle.stop();\n    done();\n  });\n  DocHead.addMeta(metaInfo);\n});\n\nTinytest.addAsync('Server - addLdJsonScript', function (test, done) {\n  var snippet = {\n    '@context': 'http://schema.org',\n    '@type': 'Organization',\n    url: 'http://www.example.com',\n    logo: 'http://www.example.com/images/logo.png'\n  };\n  var handle = onSsrContext(function (html) {\n    var scriptTag = '<script type=\"application/ld+json\" dochead=\"1\">' + '{' + '\"@context\":\"http://schema.org\",' + '\"@type\":\"Organization\",' + '\"url\":\"http://www.example.com\",' + '\"logo\":\"http://www.example.com/images/logo.png\"}' + '</script>';\n    test.equal(html, scriptTag);\n    handle.stop();\n    done();\n  });\n  DocHead.addLdJsonScript(snippet);\n});","ast":null,"map":{"version":3,"sources":["/packages/kadira:dochead/test/server.js"],"names":[],"mappings":"AAAA,IAAI,eAAe,SAAf,YAAe,CAAS,EAAT,EAAa;AAC9B,aAAW,SAAX,GAAuB,EAAvB,CAD8B;AAE9B,MAAI,OAAO,SAAP,IAAO,GAAW;AACpB,eAAW,SAAX,GAAuB,IAAvB,CADoB;GAAX,CAFmB;AAK9B,SAAO;AACL,UAAM,IAAN;GADF,CAL8B;CAAb;;AAUnB,SAAS,QAAT,CAAkB,gCAAlB,EAAoD,UAAS,IAAT,EAAe,IAAf,EAAqB;AACvE,MAAM,KAAK,OAAO,EAAP,EAAL,CADiE;AAEvE,MAAI,SAAS,aAAa,UAAS,IAAT,EAAe;AACvC,QAAM,oBAAkB,eAAlB,CADiC;AAEvC,SAAK,KAAL,CAAW,IAAX,EAAiB,KAAjB,EAFuC;AAGvC,SAAK,KAAL,CAAW,QAAQ,QAAR,EAAX,EAA+B,EAA/B,EAHuC;AAIvC,WAAO,IAAP,GAJuC;AAKvC,WALuC;GAAf,CAAtB,CAFmE;AASvE,UAAQ,QAAR,CAAiB,EAAjB,EATuE;CAArB,CAApD;;AAYA,SAAS,QAAT,CAAkB,kBAAlB,EAAsC,UAAS,IAAT,EAAe,IAAf,EAAqB;AACzD,MAAM,WAAW,EAAC,MAAM,aAAN,EAAqB,SAAS,eAAT,EAAjC,CADmD;AAEzD,MAAI,SAAS,aAAa,UAAS,IAAT,EAAe;AACvC,QAAM,2BAAyB,SAAS,IAAT,mBAA2B,SAAS,OAAT,oBAApD,CADiC;AAEvC,SAAK,KAAL,CAAW,IAAX,EAAiB,OAAjB,EAFuC;AAGvC,WAAO,IAAP,GAHuC;AAIvC,WAJuC;GAAf,CAAtB,CAFqD;AAQzD,UAAQ,OAAR,CAAgB,QAAhB,EARyD;CAArB,CAAtC;;AAWA,SAAS,QAAT,CAAkB,0BAAlB,EAA8C,UAAS,IAAT,EAAe,IAAf,EAAqB;AACjE,MAAM,UAAU;AACd,gBAAY,mBAAZ;AACA,aAAS,cAAT;AACA,SAAK,wBAAL;AACA,UAAM,wCAAN;GAJI,CAD2D;AAOjE,MAAI,SAAS,aAAa,UAAS,IAAT,EAAe;AACvC,QAAM,YAAY,oDAChB,GADgB,GAEd,iCAFc,GAGd,yBAHc,GAId,iCAJc,GAKd,kDALc,GAMlB,WANkB,CADqB;AAQvC,SAAK,KAAL,CAAW,IAAX,EAAiB,SAAjB,EARuC;AASvC,WAAO,IAAP,GATuC;AAUvC,WAVuC;GAAf,CAAtB,CAP6D;AAmBjE,UAAQ,eAAR,CAAwB,OAAxB,EAnBiE;CAArB,CAA9C","file":"/packages/kadira:dochead/test/server.js.map","sourcesContent":["let onSsrContext = function(fn) {\n  SsrContext.addToHead = fn;\n  let stop = function() {\n    SsrContext.addToHead = null;\n  };\n  return {\n    stop: stop\n  };\n};\n\nTinytest.addAsync('Server - setTitle and getTitle', function(test, done) {\n  const id = Random.id();\n  let handle = onSsrContext(function(html) {\n    const title = `<title>${id}</title>`;\n    test.equal(html, title);\n    test.equal(DocHead.getTitle(), id);\n    handle.stop();\n    done();\n  });\n  DocHead.setTitle(id);\n});\n\nTinytest.addAsync('Server - addMeta', function(test, done) {\n  const metaInfo = {name: \"description\", content: \"hello content\"};\n  let handle = onSsrContext(function(html) {\n    const metaTag = `<meta name=\"${metaInfo.name}\" content=\"${metaInfo.content}\" dochead=\"1\"/>`;\n    test.equal(html, metaTag);\n    handle.stop();\n    done();\n  });\n  DocHead.addMeta(metaInfo);\n});\n\nTinytest.addAsync('Server - addLdJsonScript', function(test, done) {\n  const snippet = {\n    '@context': 'http://schema.org',\n    '@type': 'Organization',\n    url: 'http://www.example.com',\n    logo: 'http://www.example.com/images/logo.png'\n  };\n  let handle = onSsrContext(function(html) {\n    const scriptTag = '<script type=\"application/ld+json\" dochead=\"1\">' +\n      '{' +\n        '\"@context\":\"http://schema.org\",' +\n        '\"@type\":\"Organization\",' +\n        '\"url\":\"http://www.example.com\",' +\n        '\"logo\":\"http://www.example.com/images/logo.png\"}' +\n    '</script>';\n    test.equal(html, scriptTag);\n    handle.stop();\n    done();\n  });\n  DocHead.addLdJsonScript(snippet);\n});\n"]},"hash":"e48808c1a60ab4cea0040e4158ef53f5b656106d"}
